<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1600">
  <defs>
    <style>
      .start-end { fill: #90EE90; stroke: #000; stroke-width: 2; }
      .process { fill: #87CEEB; stroke: #000; stroke-width: 2; }
      .io { fill: #FFD700; stroke: #000; stroke-width: 2; }
      .parallel { fill: #DDA0DD; stroke: #000; stroke-width: 2; }
      .text { font-family: Arial; font-size: 13px; text-anchor: middle; }
      .title { font-family: Arial; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .cluster-label { font-family: Arial; font-size: 15px; font-weight: bold; fill: #333; }
      .arrow { fill: none; stroke: #000; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000" />
    </marker>
  </defs>
  
  <text x="450" y="30" class="title">Задание 3: Гибридная обработка CPU + GPU</text>
  
  <!-- Начало -->
  <ellipse cx="450" cy="80" rx="80" ry="30" class="start-end"/>
  <text x="450" y="85" class="text">Начало</text>
  
  <line x1="450" y1="110" x2="450" y2="140" class="arrow"/>
  
  <rect x="350" y="140" width="200" height="60" rx="5" class="process"/>
  <text x="450" y="165" class="text">Инициализация массива</text>
  <text x="450" y="185" class="text">10,000,000 элементов</text>
  
  <line x1="450" y1="200" x2="450" y2="230" class="arrow"/>
  
  <!-- Тест 1: CPU -->
  <rect x="300" y="230" width="300" height="140" rx="5" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="450" y="250" class="cluster-label">Тест 1: Только CPU</text>
  
  <rect x="350" y="270" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="295" class="text">Старт таймера</text>
  
  <line x1="450" y1="310" x2="450" y2="330" class="arrow"/>
  
  <rect x="350" y="330" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="355" class="text">Обработка всего массива</text>
  
  <line x1="450" y1="370" x2="450" y2="390" class="arrow"/>
  
  <rect x="350" y="390" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="415" class="text">Стоп таймера CPU</text>
  
  <line x1="450" y1="430" x2="450" y2="460" class="arrow"/>
  
  <!-- Тест 2: GPU -->
  <rect x="300" y="460" width="300" height="310" rx="5" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="450" y="480" class="cluster-label">Тест 2: Только GPU</text>
  
  <rect x="350" y="500" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="525" class="text">cudaMalloc на GPU</text>
  
  <line x1="450" y1="540" x2="450" y2="560" class="arrow"/>
  
  <path d="M 370 560 L 530 560 L 510 610 L 350 610 Z" class="io"/>
  <text x="440" y="580" class="text">Копирование</text>
  <text x="440" y="597" class="text">всего массива на GPU</text>
  
  <line x1="440" y1="610" x2="440" y2="640" class="arrow"/>
  
  <rect x="350" y="640" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="665" class="text">Старт таймера GPU</text>
  
  <line x1="450" y1="680" x2="450" y2="700" class="arrow"/>
  
  <rect x="350" y="700" width="200" height="50" rx="5" class="process"/>
  <text x="450" y="720" class="text">Запуск ядра GPU</text>
  <text x="450" y="737" class="text">для всего массива</text>
  
  <line x1="450" y1="750" x2="450" y2="770" class="arrow"/>
  
  <rect x="350" y="770" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="795" class="text">Стоп таймера GPU</text>
  
  <line x1="450" y1="810" x2="450" y2="840" class="arrow"/>
  
  <!-- Тест 3: Гибрид -->
  <rect x="200" y="840" width="500" height="560" rx="5" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="450" y="860" class="cluster-label">Тест 3: Гибридная обработка (CPU + GPU параллельно)</text>
  
  <rect x="350" y="880" width="200" height="60" rx="5" class="process"/>
  <text x="450" y="900" class="text">Деление массива пополам:</text>
  <text x="450" y="917" class="text">1-я половина → CPU</text>
  <text x="450" y="933" class="text">2-я половина → GPU</text>
  
  <line x1="450" y1="940" x2="450" y2="970" class="arrow"/>
  
  <rect x="350" y="970" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="995" class="text">Старт таймера гибрид</text>
  
  <!-- Разделение на параллельные ветки -->
  <line x1="450" y1="1010" x2="450" y2="1040" class="arrow"/>
  <line x1="450" y1="1040" x2="250" y2="1040" class="arrow"/>
  <line x1="450" y1="1040" x2="650" y2="1040" class="arrow"/>
  
  <!-- Левая ветка: CPU -->
  <rect x="230" y="1040" width="160" height="80" rx="5" class="parallel"/>
  <text x="310" y="1065" class="text" font-weight="bold">CPU поток:</text>
  <text x="310" y="1085" class="text">создаём thread</text>
  <text x="310" y="1102" class="text">обработка 1-й</text>
  <text x="310" y="1118" class="text">половины массива</text>
  
  <!-- Правая ветка: GPU -->
  <rect x="570" y="1040" width="160" height="140" rx="5" class="parallel"/>
  <text x="650" y="1065" class="text" font-weight="bold">GPU ветка:</text>
  <text x="650" y="1085" class="text">копирование 2-й</text>
  <text x="650" y="1102" class="text">половины на GPU</text>
  <text x="650" y="1119" class="text">↓</text>
  <text x="650" y="1136" class="text">запуск ядра GPU</text>
  <text x="650" y="1153" class="text">для 2-й половины</text>
  <text x="650" y="1170" class="text">↓</text>
  
  <!-- Синхронизация -->
  <line x1="310" y1="1120" x2="310" y2="1220" class="arrow"/>
  <line x1="650" y1="1180" x2="650" y2="1220" class="arrow"/>
  <line x1="310" y1="1220" x2="450" y2="1220" class="arrow"/>
  <line x1="650" y1="1220" x2="450" y2="1220" class="arrow"/>
  
  <rect x="350" y="1220" width="200" height="60" rx="5" class="process"/>
  <text x="450" y="1240" class="text">Синхронизация:</text>
  <text x="450" y="1257" class="text">thread.join()</text>
  <text x="450" y="1273" class="text">cudaDeviceSynchronize()</text>
  
  <line x1="450" y1="1280" x2="450" y2="1310" class="arrow"/>
  
  <path d="M 370 1310 L 530 1310 L 510 1360 L 350 1360 Z" class="io"/>
  <text x="440" y="1330" class="text">Копирование результата</text>
  <text x="440" y="1347" class="text">2-й половины с GPU</text>
  
  <line x1="440" y1="1360" x2="440" y2="1390" class="arrow"/>
  
  <rect x="350" y="1390" width="200" height="40" rx="5" class="process"/>
  <text x="450" y="1415" class="text">Стоп таймера гибрид</text>
  
  <line x1="450" y1="1430" x2="450" y2="1460" class="arrow"/>
  
  <!-- Сравнение -->
  <rect x="330" y="1460" width="240" height="80" rx="5" class="process"/>
  <text x="450" y="1485" class="text" font-weight="bold">Сравнение результатов:</text>
  <text x="450" y="1505" class="text">• Время CPU only</text>
  <text x="450" y="1522" class="text">• Время GPU only</text>
  <text x="450" y="1538" class="text">• Время Hybrid (CPU+GPU)</text>
  
  <line x1="450" y1="1540" x2="450" y2="1570" class="arrow"/>
  
  <!-- Конец -->
  <ellipse cx="450" cy="1600" rx="80" ry="30" class="start-end"/>
  <text x="450" y="1605" class="text">Конец</text>
  
</svg>
