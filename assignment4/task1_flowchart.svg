<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1400">
  <!-- Стили -->
  <defs>
    <style>
      .start-end { fill: #90EE90; stroke: #000; stroke-width: 2; }
      .process { fill: #87CEEB; stroke: #000; stroke-width: 2; }
      .io { fill: #FFD700; stroke: #000; stroke-width: 2; }
      .decision { fill: #FFA07A; stroke: #000; stroke-width: 2; }
      .text { font-family: Arial; font-size: 14px; text-anchor: middle; }
      .title { font-family: Arial; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .cluster-label { font-family: Arial; font-size: 16px; font-weight: bold; fill: #333; }
      .arrow { fill: none; stroke: #000; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000" />
    </marker>
  </defs>
  
  <!-- Заголовок -->
  <text x="400" y="30" class="title">Задание 1: Суммирование массива на CUDA</text>
  
  <!-- Начало (овал) -->
  <ellipse cx="400" cy="80" rx="80" ry="30" class="start-end"/>
  <text x="400" y="85" class="text">Начало</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="110" x2="400" y2="140" class="arrow"/>
  
  <!-- Инициализация массива (прямоугольник) -->
  <rect x="300" y="140" width="200" height="60" rx="5" class="process"/>
  <text x="400" y="165" class="text">Инициализация массива</text>
  <text x="400" y="185" class="text">100,000 элементов</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="200" x2="400" y2="230" class="arrow"/>
  
  <!-- CPU блок -->
  <rect x="250" y="230" width="300" height="200" rx="5" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="400" y="250" class="cluster-label">CPU Вычисления</text>
  
  <!-- Старт таймера CPU -->
  <rect x="300" y="270" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="295" class="text">Старт таймера CPU</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="310" x2="400" y2="330" class="arrow"/>
  
  <!-- Цикл суммирования -->
  <rect x="300" y="330" width="200" height="50" rx="5" class="process"/>
  <text x="400" y="350" class="text">Суммирование в цикле</text>
  <text x="400" y="367" class="text">sum += array[i]</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="380" x2="400" y2="400" class="arrow"/>
  
  <!-- Стоп таймера CPU -->
  <rect x="300" y="400" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="425" class="text">Стоп таймера CPU</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="440" x2="400" y2="470" class="arrow"/>
  
  <!-- GPU блок -->
  <rect x="250" y="470" width="300" height="490" rx="5" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="400" y="490" class="cluster-label">GPU Вычисления</text>
  
  <!-- Выделение памяти GPU -->
  <rect x="300" y="510" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="535" class="text">cudaMalloc (GPU)</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="550" x2="400" y2="570" class="arrow"/>
  
  <!-- Копирование на GPU (параллелограмм) -->
  <path d="M 320 570 L 480 570 L 460 620 L 300 620 Z" class="io"/>
  <text x="390" y="590" class="text">cudaMemcpy</text>
  <text x="390" y="607" class="text">Host → Device</text>
  
  <!-- Стрелка -->
  <line x1="380" y1="620" x2="380" y2="650" class="arrow"/>
  
  <!-- Конфигурация блоков -->
  <rect x="300" y="650" width="200" height="50" rx="5" class="process"/>
  <text x="400" y="670" class="text">Настройка блоков</text>
  <text x="400" y="687" class="text">и потоков CUDA</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="700" x2="400" y2="720" class="arrow"/>
  
  <!-- Старт таймера GPU -->
  <rect x="300" y="720" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="745" class="text">Старт таймера GPU</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="760" x2="400" y2="780" class="arrow"/>
  
  <!-- Запуск ядра -->
  <rect x="300" y="780" width="200" height="60" rx="5" class="process"/>
  <text x="400" y="800" class="text">Запуск ядра arraySum</text>
  <text x="400" y="817" class="text">atomicAdd()</text>
  <text x="400" y="833" class="text">для каждого потока</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="840" x2="400" y2="860" class="arrow"/>
  
  <!-- Синхронизация -->
  <rect x="300" y="860" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="885" class="text">cudaDeviceSynchronize()</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="900" x2="400" y2="920" class="arrow"/>
  
  <!-- Стоп таймера GPU -->
  <rect x="300" y="920" width="200" height="40" rx="5" class="process"/>
  <text x="400" y="945" class="text">Стоп таймера GPU</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="960" x2="400" y2="990" class="arrow"/>
  
  <!-- Копирование обратно -->
  <path d="M 320 990 L 480 990 L 460 1040 L 300 1040 Z" class="io"/>
  <text x="390" y="1010" class="text">cudaMemcpy</text>
  <text x="390" y="1027" class="text">Device → Host</text>
  
  <!-- Стрелка -->
  <line x1="380" y1="1040" x2="380" y2="1070" class="arrow"/>
  
  <!-- Сравнение результатов -->
  <rect x="300" y="1070" width="200" height="60" rx="5" class="process"/>
  <text x="400" y="1090" class="text">Сравнение результатов</text>
  <text x="400" y="1107" class="text">и времени выполнения</text>
  <text x="400" y="1123" class="text">CPU vs GPU</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="1130" x2="400" y2="1160" class="arrow"/>
  
  <!-- Вывод результатов (параллелограмм) -->
  <path d="M 320 1160 L 480 1160 L 460 1210 L 300 1210 Z" class="io"/>
  <text x="390" y="1180" class="text">Вывод результатов:</text>
  <text x="390" y="1197" class="text">суммы и времени</text>
  
  <!-- Стрелка -->
  <line x1="380" y1="1210" x2="380" y2="1240" class="arrow"/>
  
  <!-- Освобождение памяти -->
  <rect x="300" y="1240" width="200" height="50" rx="5" class="process"/>
  <text x="400" y="1260" class="text">Освобождение памяти</text>
  <text x="400" y="1277" class="text">cudaFree() и delete[]</text>
  
  <!-- Стрелка -->
  <line x1="400" y1="1290" x2="400" y2="1320" class="arrow"/>
  
  <!-- Конец (овал) -->
  <ellipse cx="400" cy="1350" rx="80" ry="30" class="start-end"/>
  <text x="400" y="1355" class="text">Конец</text>
  
</svg>
