# Гетерогенная параллелизация с OpenMP

практика по параллельному программированию, сравнение последовательных и параллельных алгоритмов

## что тут есть

четыре задания разной сложности:

- **задание 1** — динамическая память и вычисление среднего (25 баллов)
- **задание 2** — поиск min/max в миллионе чисел (25 баллов)  
- **задание 3** — параллельный поиск min/max с OpenMP (25 баллов)
- **задание 4** — среднее значение в 5М элементов с редукцией (25 баллов)

## как запустить

нужен компилятор с поддержкой OpenMP (gcc/g++ обычно норм)

```bash
g++ -fopenmp -O2 -o program program.cpp
./program
```

для windows с mingw:
```bash
g++ -fopenmp -O2 -o program.exe program.cpp
program.exe
```

## что делает программа

### задание 1: работа с памятью
- создаёт массив из 50к чисел (1-100)
- считает среднее значение
- чистит за собой память

### задание 2: базовый поиск
- миллион случайных чисел
- ищет минимум и максимум обычным циклом
- замеряет время

### задание 3: параллельный поиск
делает то же самое двумя способами:
- обычный последовательный цикл
- параллельный через OpenMP с `reduction`

показывает во сколько раз быстрее получилось

### задание 4: большие данные
- 5 миллионов чисел
- считает среднее двумя способами
- сравнивает скорость

## примерный вывод

```
Программа по гетерогенной параллелизации
Количество доступных потоков: 8

=== Задание 1 ===
Среднее значение: 50.47

=== Задание 2 ===
Минимум: 1
Максимум: 1000
Время выполнения (последовательно): 1234 мкс

=== Задание 3 ===
Последовательно:
  Минимум: 1
  Максимум: 1000
  Время: 1234 мкс
Параллельно (OpenMP):
  Минимум: 1
  Максимум: 1000
  Время: 456 мкс
Ускорение: 2.71x

=== Задание 4 ===
Последовательно:
  Среднее: 50.50
  Время: 6789 мкс
Параллельно (OpenMP с редукцией):
  Среднее: 50.50
  Время: 2345 мкс
Ускорение: 2.89x
```

## что влияет на скорость

- количество ядер процессора
- размер массивов
- оптимизация компилятора (`-O2` или `-O3`)
- загрузка системы в момент запуска

## зависимости

- стандартная библиотека C++11 или новее
- OpenMP (обычно идёт с gcc)

## полезные флаги

```bash
# максимальная оптимизация
g++ -fopenmp -O3 -march=native -o program program.cpp

# с отладочной информацией
g++ -fopenmp -O2 -g -o program program.cpp

# посмотреть сколько потоков используется
export OMP_NUM_THREADS=4  # перед запуском
```

## структура кода

каждая функция делает своё задание:
- `task1()` — первое задание
- `task2()` — второе задание
- `task3()` — третье задание
- `task4()` — четвёртое задание
- `main()` — запускает всё по порядку

все строки закомментированы, можно разобраться что к чему

## лицензия

делай что хочешь
